# WordPress用テーマ `skel`

![Skelton](screenshot.png)

`skel` は「がいこつのようにシンプルであまりゴテゴテしていない」WordPress用のテーマです。
…が、つくってるうちにわりとそれなりの機能がついてしまいました。

<!-- TOC -->

- [WordPress用テーマ `skel`](#wordpress用テーマ-skel)
    - [動作環境](#動作環境)
    - [提供機能](#提供機能)
        - [基本的な機能](#基本的な機能)
        - [テーマ自身が提供するもの](#テーマ自身が提供するもの)
        - [推奨プラグインが提供するもの](#推奨プラグインが提供するもの)
        - [インストール推奨プラグイン](#インストール推奨プラグイン)
    - [現在知られている問題](#現在知られている問題)
    - [設計](#設計)
        - [HTML/CSS/JavaScript設計](#htmlcssjavascript設計)
        - [PHPコーディング](#phpコーディング)
    - [技術的詳細](#技術的詳細)
        - [ウィジェット開発簡便化のための基礎クラス](#ウィジェット開発簡便化のための基礎クラス)
        - [ショートコード開発簡便化のための基礎クラス](#ショートコード開発簡便化のための基礎クラス)

<!-- /TOC -->


## 動作環境

特に指定しませんが、以下の環境で動作確認をおこなっています：

* WordPress 4.1
* PHP 5.4以降（必須）
* サーバ側OS
    * 上述の環境なら特に問わず。制作者は Docker 環境下 x64 Alpine Linux 使用
* クライアント側OS
    * 問わず。制作者は Windows 10 x64 使用
* クライアント側ブラウザ
    * 問わず。制作者は Chrome 56 x64 使用

## 提供機能

### 基本的な機能

* レスポンシブ
    * 基本2カラム。サイドバーを左右どちらに置くか指定可能
* テーマカスタマイザ
    * ヘッダー画像の変更
* スクロールしてもついてくるパーツ
    * グローバルメニュー
    * 「ページの最初へ」戻るボタン
* サイドバー（ウィジェットを置く領域）対応
    * 横幅いっぱいのヘッダ
    * 本文脇
    * 横幅いっぱいのフッタ
    * ヘッダ（左・中央・右）
    * フッタ（左・中央・右）
* メニュー対応
    * サイトグローバルメニュー - 最上位統一メニュー
    * サイトグローバルメニュー（脇） - 最上位統一メニューの右寄せ要素
    * サイトグローバルメニュー（ドロップダウン）- メニューからのドロップダウン要素
* Windows/OS X/Android/iPhone, Edge/Chrome/Safari でアンチエイリアスフォント表示されるよう設定 

### テーマ自身が提供するもの

* SNSシェアボタン
    * Twitter, Facebook, はてなブックマーク, Google+, LINE
* Googleサーチコンソール対応
* Google Analytics対応
* Google タグマネージャ対応
* Canonical（標準のまま）
* Twitterカード
* Facebook OGP
* ページャ
    * トップページ、各カテゴリ・アーカイブページ、検索結果ページ
* アイコンフォント
    * FontAwesome
    * Google Material Icon
* ウィジェット
    * プロフィール
    * サイト内検索
    * タグ
* ウィジェット開発簡便化のための基礎クラス
* ショートコード
    * センタリング `[centered]...[/centered]`
    * ジョンソンボックス `[johnson title=""]...[/johnson]`
* ショートコード開発簡便化のための基礎クラス
* 国際化対応
    * したがってテーマファイル中には一切日本語は入っていません
    * テキストドメイン `skel` を使用しています

### 推奨プラグインが提供するもの

* 関連記事（JetPack）
* PC／スマートフォンの閲覧環境などに応じたウィジェットのON／OFF （[Widget Options]()）
* シンタックスハイライト（[Crayon]()）
    * 行末にひとつ空行が追加されるバグをCSSで修正
* blogカード（[Pzリンクカード](http://popozure.info/pz-linkcard)）
* カテゴリの順序変更（[Category Order]()）

### インストール推奨プラグイン

* 必須
    * WP Multibyte Patch
    * JetPack
* 推奨
    * Widget Options PC／スマートフォンの閲覧環境などに応じたウィジェットのON／OFF
    * Crayon
    * [Pzリンクカード](http://popozure.info/pz-linkcard)
    * Category Order

## 現在知られている問題

* JetPackの「パブリサイズ共有」を同時に利用できない
    * OGP情報出力を受けてJetPackの該当機能が無効になると思われる

## 設計

### HTML/CSS/JavaScript設計

* プログレッシブエンハンスメントを考慮
    * Webユーザーエージェントなら基本的に閲覧できる
    * 最新のCSS・JavaScriptに対応していればさらに便利に閲覧できる
* SemanticUI をひながたに使用
    * グリッドデザインをあまり意識しないですむ HTML・CSS で書かれています
* HTML5要素（`section` `article` `aside`…）を積極的に使用
* `data` 属性を使用
    * `data-skel-` 接頭辞をもつ属性を使用
* id/class 命名
    * 原則として接頭辞 `skel--` で統一
    * とりわけグラフィカルな指定をするための要素は `skel--gui--` で統一
    * class名は複数形
    * 1ページ中に一か所しか存在せず端的にアクセスが必要な要素にid名をつける
    * id名は単数形
* JavaScript
    * jQuery 3ベース。WordPress同梱のjQueryは無効にしています（影響なし）
    * 本テーマによるグローバル汚染は `window.skel` のみです

### PHPコーディング

* PHP5.4以降の環境を想定し以下の機能を使っています
    * `array()` 短縮表記（`[]`）
    * 無名関数 `function() { ... }`
    * `class` 構文
* 本テーマによるグローバルな名称の使用は `class skel` のみです
* グローバル変数の使用を避けるため無名関数の即値実行を採用しています

## 技術的詳細

### ウィジェット開発簡便化のための基礎クラス

ウィジェットで提供する管理画面内入力フォーム形式は以下のとおりです：

* INPUT TEXT（テキストフィールド）
* INPUT RADIO（ラジオボタン）
* TEXTAREA（長文テキスト）
* 画像選択（WordPressメディアアップローダー。単一画像のみ）

### ショートコード開発簡便化のための基礎クラス
